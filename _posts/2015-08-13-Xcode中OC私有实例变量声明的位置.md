---
layout: default
title: Xcode中OC私有实例变量声明的位置
---
{{ page.title }}
=============
{{ page.date | date: "%Y-%m-%d" }}

在Xcode中新建一个Class叫Test，会生成Test.h和Test.m两个文件，那么这个类的私有的实例变量应该声明在哪里？我以前看过的至少有3个地方是可以的：

1.在Test.h中，下面这样：
    @interface Test : NSObject{
        NSString *str;
    }
    @end

2.在Test.m的@interface中：
    #import "Test.h"

	@interface Test (){
    	NSString *str;
	}
	@end

	@implementation Test

	@end

3.同样在Test.m中，不过这次是在@implementation中：
	#import "Test.h"

	@interface Test ()

	@end

	@implementation Test{
	    NSString *str;
	}
	@end

这个问题一直困扰着我，最近在http://blog.devtang.com/blog/2015/03/15/ios-dev-controversy-1/找到了原因，mark一下原因，以下内容来自前面的这个博文：

在 Objective-C 的语言的早期，类的私有成员变量是只能定义在 .h 的头文件里面的。像如下这样：
	@interface ViewController : UIViewController {
    	@private
    	NSInteger _value;
	}

之后，苹果改进了 Objective-C，允许在 .m 里面添加一个特殊的匿名 Category，即没有名字的 Category，来实现增加类的成员变量。像如下这样：
	@interface ViewController ()

	@property (nonatomic) NSInteger value;

	@end

这样的好处是，这些变量在头文件中被彻底隐藏起来了，不用暴露给使用者。

接着，在 2013 年的 WWDC 中，苹果进一步改进了 Objective-C，允许在 .m 的 @implementation 中直接添加类的私有成员变量。像如下这样：

	@implementation ViewController {
    	NSInteger _value;
	}

最后他的建议是在@implementation中声明，详细原因可以参见http://blog.devtang.com/blog/2015/03/15/ios-dev-controversy-1/。
